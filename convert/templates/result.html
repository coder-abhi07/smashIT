{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{% if form%}
        Text Response
        {% else %}
        Result
        {% endif %}
    </title>

    <link rel="apple-touch-icon" sizes="180x180" href="{% static '/icon/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static '/icon/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" href="{% static '/icon/favicon.ico'%}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static '/icon/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static '/icon/site.webmanifest' %}" />

    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
  

    <header class="header">
        <div class="logo">
            <img src="{% static 'icon/favicon.ico' %}" alt="logo" />
            <div class="waviy">
                <span style="--i:1">S</span>
                <span style="--i:2">m</span>
                <span style="--i:3">a</span>
                <span style="--i:4">s</span>
                <span style="--i:5">h</span>
                <span style="--i:6">I</span>
                <span style="--i:7">T</span>
                <span style="--i:8">.</span>
            </div>
        </div>
        <nav class="navbar">
            <ul class="navbar-list">
                {% if user.is_authenticated %}
                <li> <a class="navbar-link" href="{% url 'logout' %}" id="qsLogoutBtn">Logout</a></li>
                {% else %}
                <li> <a class="navbar-link" href="{% url 'login' %}" id="qsLoginBtn"><ion-icon
                            name="person-sharp"></ion-icon>Login</a></li>
                {% endif %}
                <li><a class="navbar-link" href="{% url 'index' %}">Home</a></li>
                <li><a class="navbar-link" href="{% url 'about' %}">About</a></li>
                <li><a class="navbar-link" href="#contactMe">Contact</a></li>
            </ul>
        </nav>

        <div class="mobile-navbar-btn">
            <ion-icon name="menu-outline" class="mobile-nav-icon"></ion-icon>
            <ion-icon name="close-outline" class="mobile-nav-icon"></ion-icon>
        </div>

    </header>
    <div class="wave-svg-design">
        <div class="custom-shape-divider-top-1697723717">
            <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path
                    d="M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39-57.84,11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8C1132.19,118.92,1055.71,111.31,985.66,92.83Z"
                    class="shape-fill"></path>
            </svg>
        </div>
    </div>

        {% if form %}
        <div class = "form-container">
        <form method="post" action="{% url 'result' %}">
            {% csrf_token %}
            
            <div class = "instructions-container">
            <h1>Instructions</h1>
            <ul> 
                <li class = "instructions" >Simplify the text by removing extraneous information like marks for each question and non-question content. </li>
                <li class = "instructions" >Edit any inaccuracies, add or remove questions or data, and eliminate empty spaces.</li>
                <li class = "instructions" > Also, remove any instructions such as the school name and the requirement to attempt a specific number of questions.</li>
                <li class = "instructions" > The result should be a clean list of questions without any added question marks.</li>
            </ul>
        </div>
               <div class = "wave-svg-design">
                <div class="custom-shape-divider-bottom-1698491614">
                    <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                        <path d="M0,0V6c0,21.6,291,111.46,741,110.26,445.39,3.6,459-88.3,459-110.26V0Z" class="shape-fill"></path>
                    </svg>
                </div>
               </div>
            <br>
            <h1>Text Response</h1>
            {{ form.my_textarea}}
        
               
            <br>
            <button class = "btn" type="submit">Submit</button>
        </form>
        <div class = "wave-svg-design">
        <div class="custom-shape-divider-bottom-1698493972">
            <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path
                    d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
                    class="shape-fill"></path>
            </svg>
        </div>
        </div>
        </div>
        {% endif %}

        {% if finalForm %}
        <div class = "finalResult"> 
            <h2 class = "finalResult-heading">Important Questions</h2>
            
       
        {{ finalForm.my_textarea}}
        <button id = "copyButton"> Copy to Clipboard </button>
        </div>
        <div class="wave-svg-design">
            <div class="custom-shape-divider-bottom-1698508361">
                <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                    <path
                        d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
                        class="shape-fill"></path>
                </svg>
            </div>
        </div>
        
        {% endif %}

<hr class="dotted-line">

<footer class="footer">
    <div class="waves">
        <div class="wave" id="wave1"></div>
        <div class="wave" id="wave2"></div>
        <div class="wave" id="wave3"></div>
        <div class="wave" id="wave4"></div>
    </div>
    <ul id = "contactMe" class="social-icon">
        <li class="social-icon__item"><a class="social-icon__link" target="_blank"
                href="https://www.facebook.com/profile.php?id=100028091352527&sk=grid">
                <ion-icon name="logo-facebook"></ion-icon>
            </a></li>
        <li class="social-icon__item"><a class="social-icon__link" target="_blank"
                href="https://twitter.com/coder_abhi07">
                <ion-icon name="logo-twitter"></ion-icon>
            </a></li>
        <li class="social-icon__item"><a class="social-icon__link" target="_blank"
                href="https://www.linkedin.com/in/abhishek-kumar-573418164/">
                <ion-icon name="logo-linkedin"></ion-icon>
            </a></li>
        <li class="social-icon__item"><a class="social-icon__link" target="_blank"
                href="https://www.instagram.com/this_isabhi07/">
                <ion-icon name="logo-instagram"></ion-icon>
            </a></li>
    </ul>


    <p>&copy; <span id="year"></span>
        SmashIT | All Rights Reserved</p>
</footer>
<script>

    document.getElementById("copyButton").addEventListener("click", function () {
            // Get the text from the text area
            var textArea = document.querySelector(".my_textarea");
            textArea.select();
            
            
            
            // Deselect the text area
            document.execCommand("copy");

            textArea.blur();

            // Update the button text
            this.innerHTML = "Copied!";

            // Reset the button text after a brief delay
            setTimeout(function () {
                document.getElementById("copyButton").innerHTML = "Copy to Clipboard";
            }, 1000);
        });


        function calcHeight(value) {
            let numberOfLineBreaks = (value.match(/\n/g) || []).length;
            // min-height + lines x line-height + padding + border
            let newHeight = 20 + numberOfLineBreaks * 20 + 12 + 2;
            return newHeight;
        }

        let textarea = document.querySelector(".my_textarea");
        textarea.addEventListener("keyup", () => {
            textarea.style.height = calcHeight(textarea.value) + "px";
        });


    document.getElementById("year").innerHTML = new Date().getFullYear();
    const mobile_nav = document.querySelector(".mobile-navbar-btn");
    const nav_header = document.querySelector(".header");

    const toggleNavbar = () => {

        nav_header.classList.toggle("active");
    };

    mobile_nav.addEventListener("click", () => toggleNavbar());

</script>

<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>


</body>

</html>